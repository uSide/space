
<!DOCTYPE HTML>
<html>
<head>
    <title>deus</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #fff;
        }
    </style>
    <script src="/pixi.js"></script>
    <script src="/mousetrap.min.js"></script>

</head>
<body>
    <script>
    var renderer = PIXI.autoDetectRenderer(window.innerWidth - 25, window.innerHeight - 25);
    document.body.appendChild(renderer.view);
    // create an new instance of a pixi stage
    var stage = new PIXI.Stage(0x66FF99);

    // create a texture from an image path
    var backgroundTexture = PIXI.Texture.fromImage("/bg.jpg");
    // create a new Sprite using the texture
    var background = new PIXI.Sprite(backgroundTexture);

    var textures = [];

    for (var i = 0; i < 51; i++) {
        var arr = ['00','0'+i, i];
        textures[i] = PIXI.Texture.fromImage("/ships/lol/2s_0"+arr[i.toString().length]+".png");
    }

    // create a new Sprite using the texture
    var bunny = new PIXI.MovieClip(textures);

    bunny.play();
    bunny.animationSpeed = 0.3;

    bunny.scale.x = 0.5;
    bunny.scale.y = 0.5;

    // center the sprites anchor point
    bunny.anchor.x = 0.5;
    bunny.anchor.y = 0.5;

    // move the sprite t the center of the screen
    bunny.position.x = 200;
    bunny.position.y = 100;

    // move the sprite t the center of the screen
    background.position.x = 0;
    background.position.y = 0;

    stage.addChild(background);
    stage.addChild(bunny);

    var render = function(){
        requestAnimationFrame(render);

        renderer.render(stage);
    }

    var keys = {
        right: false,
        left: false,
        up: false,
        maxSpeed: 5,
        speed: 0
    }

    Mousetrap.bind('right', function() {
        keys.right = true;
    });

    Mousetrap.bind('right', function() {
        keys.right = false;
    }, 'keyup');

    Mousetrap.bind('left', function() {
        keys.left = true;
    });

    Mousetrap.bind('left', function() {
        keys.left = false;
    }, 'keyup');

    Mousetrap.bind('up', function() {
        keys.up = true;
    });

    Mousetrap.bind('up', function() {
        keys.up = false;
    }, 'keyup');

    setInterval(function(){
        if(!keys.right && !keys.left){
            if(keys.up && keys.speed < keys.maxSpeed){
                keys.speed += 0.2;
            } else if(keys.speed < 0.5){
                keys.speed = 0;
            } else if(keys.speed > 0){
                keys.speed -= 0.1;
            }
        }

        if(keys.right){
            bunny.rotation += 0.05;
            if(keys.speed < keys.maxSpeed){
                keys.speed += 0.2;
            }
        }
        if(keys.left){
            bunny.rotation -= 0.05;
            if(keys.speed < keys.maxSpeed){
                keys.speed += 0.2;
            }
        }

        // console.log(keys.speed);

        var angle = bunny.rotation % (2 * Math.PI);

        var deltas = polarToRect(keys.speed, angle);

        bunny.position.x += deltas[0];
        bunny.position.y -= deltas[1];
    }, 10);

    function rectToPolar(x, y){
        return [
            Math.sqrt(x * x + y * y),
            Math.atan2(x, y)
        ];
    }

    function polarToRect(r, phi){
        return [
            r * Math.sin(phi),
            r * Math.cos(phi)
        ];
    }

    requestAnimationFrame(render);
    </script>

    </body>
</html>